# malwhere

malwhereは，サイバーセキュリティの学習を目的としたインタラクティブなマルウェア検知ゲームです．Dockerコンテナ内で様々な異常状況を再現し，プレイヤーがそれらを検知する能力を鍛えることができます．

## 概要

このゲームでは，プレイヤーはシステム管理者となり，様々なDockerコンテナ環境で異常（anomaly）が発生しているかどうかを判断します．マルウェアの感染やセキュリティ侵害の兆候を見つけ出し，セキュリティ専門家としてのスキルを向上させることが目的です．

## 実行環境

このゲームは，以下が実行可能なLinux上での使用を想定しています．
- docker
- python3.12
  - venv
WSLでも実行できることは確認しているものの，動作が遅くなる場合がございます．


## インストール

1. リポジトリをクローン：
```bash
git clone https://github.com/tuyo1023/malwhere.git
cd malwhere
```

2. Python仮想環境を作成してパッケージをインストール：
```bash
python3 -m venv venv
source venv/bin/activate
pip3 install -r requirements.txt
```

3. gpasswdで自分のユーザをdockerグループに追加：
```bash
sudo gpasswd -a $USER docker
```

## 使用方法

1. 仮想環境をアクティベート:
```bash
source venv/bin/activate
```

2. アプリケーションを実行:
```bash
python3 malware.py
```
実行に失敗する場合は，インストールの3で行ったグループの追加がうまくできていない可能性があります．この場合は，以下のコマンドで現在のシェルの1次グループをdockerに変更した後にもう一度お試しください．
```bash
newgrp docker
```

3. メニューから「ゲームスタート」を選択

4. Dockerコンテナが起動し，シェル環境が表示されます（数十秒～数分時間を要する場合がございます）

5. システムを調査し，異常があるかどうかを判断（制限時間も一応設けており，30分となっています．制限時間を過ぎた場合は，回答に移ります．）

6. 異常の有無を回答

7. 結果に応じて次の問題に進む

## ゲームルール

### クリア条件
- **8回連続正解**でゲームクリア！

### 進行ルール
- 各問題でシステムに異常があるかないかを判断
- 正解すると正解数が+1され，次の問題に進む
- **不正解の場合，正解数が0にリセット**される
- 最初からやり直しとなる

### 回答方法
- 「異常あり」，または「異常なし」ボタンを押下

### スコア管理
- 現在の正解数が画面に表示される
- 目標の8回連続正解まであと何回かが分かる


## 🛠️ 開発・カスタマイズ

### 新しい異常パターンの追加

1. `scripts/` ディレクトリに新しいシェルスクリプトを追加
  - init.shはすべてのパターンで実行されるスクリプトです．

2. `descriptions/` ディレクトリに対応する説明ファイルを追加（このとき，ファイル名を対応するシェルスクリプトと合わせるようお願いします．例：（hoge.sh -> hoge.txt）
3. 必要に応じて `mal_shell.json` のリストを更新
   - これに登録したシェルスクリプトがinit.shの最後に実行され，異変を仕込むことができます．

#### `mal_shell.json`について
- `mal_shell.json`はシェルスクリプトと，このシェルスクリプトによって仕込まれるプログラムが異変なのか，そうでないのかを対応付けるファイルです．
- キーにシェルスクリプト名，値にtrue(異変であるとき)，もしくはfalse(異変でないとき)を設定してください


## ⚠️ 注意事項

- 最初のプログラム起動時は，Dockerのビルドにかなり時間がかかります．ご了承ください．
- Docker環境内で，Ctrl + cを入力すると，意図しない挙動を引き起こす可能性があります．ご了承ください．
- このアプリケーションは教育目的でのみ使用してください
- 本ゲームにて得た知識を悪用することを禁止します
- Dockerコンテナ内でのみ異常を実行し，ホストシステムに影響を与えないよう注意してください
  
